FROM oven/bun:1-slim

WORKDIR /app

# Copy package files
COPY package.json ./
COPY bun.lockb* ./

# Install dependencies
RUN bun install

# Copy source (will be overridden by bind mount in dev)
COPY . .

# Copy dev entrypoint script
COPY scripts/dev-entrypoint.sh ./scripts/dev-entrypoint.sh
RUN chmod +x ./scripts/dev-entrypoint.sh

# Expose Vite dev server port
EXPOSE 5173

# Run dev entrypoint script
CMD ["sh", "/app/scripts/dev-entrypoint.sh"]
