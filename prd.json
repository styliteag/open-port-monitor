{
  "project": "Open Port Monitor",
  "branchName": "ralph/export-reports",
  "description": "Export Reports - Add CSV and PDF export functionality for scan results, alerts, and host data",
  "userStories": [
    {
      "id": "US-001",
      "title": "Add CSV export endpoint for scan results",
      "description": "As an admin, I want to export a single scan's results to CSV format so that I can analyze the data in spreadsheet tools.",
      "acceptanceCriteria": [
        "Add GET /api/scans/{scan_id}/export/csv endpoint",
        "Endpoint returns CSV file with headers: IP, Port, Protocol, Service, First Seen, Last Seen",
        "Endpoint requires authentication (CurrentUser dependency)",
        "CSV filename includes scan ID and timestamp",
        "Returns 404 if scan not found",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Add CSV export endpoint for alerts",
      "description": "As an admin, I want to export all alerts to CSV format so that I can share security findings with my team.",
      "acceptanceCriteria": [
        "Add GET /api/alerts/export/csv endpoint with optional query params (acknowledged, alert_type)",
        "Endpoint returns CSV file with headers: Alert Type, IP, Port, Network, Status, Created At, Acknowledged At",
        "Endpoint requires authentication (CurrentUser dependency)",
        "CSV filename includes timestamp",
        "Respects existing query filters (acknowledged=true/false, alert_type)",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Add CSV export endpoint for hosts",
      "description": "As an admin, I want to export discovered hosts to CSV format so that I can maintain an inventory of network devices.",
      "acceptanceCriteria": [
        "Add GET /api/hosts/export/csv endpoint with optional query params (network_id, status)",
        "Endpoint returns CSV file with headers: IP, Hostname, Status, OS Guess, First Seen, Last Seen, Open Ports Count",
        "Endpoint requires authentication (CurrentUser dependency)",
        "CSV filename includes timestamp",
        "Respects existing query filters if any",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Add PDF export endpoint for scan results",
      "description": "As an admin, I want to export scan results to PDF format so that I can create professional reports for stakeholders.",
      "acceptanceCriteria": [
        "Add GET /api/scans/{scan_id}/export/pdf endpoint",
        "Install reportlab or weasyprint library for PDF generation",
        "PDF includes: scan metadata (network, date, status), summary statistics (total ports found), detailed table of open ports",
        "Endpoint requires authentication (CurrentUser dependency)",
        "PDF filename includes scan ID and timestamp",
        "Returns 404 if scan not found",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Add PDF export endpoint for alerts",
      "description": "As an admin, I want to export alerts to PDF format so that I can create executive summaries of security risks.",
      "acceptanceCriteria": [
        "Add GET /api/alerts/export/pdf endpoint with optional query params (acknowledged, alert_type)",
        "PDF includes: report header with timestamp, summary statistics (total alerts, by type, by status), detailed table of alerts",
        "Endpoint requires authentication (CurrentUser dependency)",
        "PDF filename includes timestamp",
        "Respects existing query filters (acknowledged=true/false, alert_type)",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Add PDF export endpoint for hosts",
      "description": "As an admin, I want to export hosts to PDF format so that I can create network inventory reports.",
      "acceptanceCriteria": [
        "Add GET /api/hosts/export/pdf endpoint with optional query params (network_id, status)",
        "PDF includes: report header with timestamp, summary statistics (total hosts, by status), detailed table of hosts",
        "Endpoint requires authentication (CurrentUser dependency)",
        "PDF filename includes timestamp",
        "Respects existing query filters if any",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Add export dropdown to Scans page",
      "description": "As a user, I want an export button on the scan detail page so that I can easily download scan results.",
      "acceptanceCriteria": [
        "Add Export dropdown button to ScanDetail page with options: 'Export as CSV' and 'Export as PDF'",
        "Clicking CSV option triggers download from /api/scans/{id}/export/csv",
        "Clicking PDF option triggers download from /api/scans/{id}/export/pdf",
        "Button positioned near scan details header",
        "Show loading indicator during export",
        "Handle errors gracefully with toast notifications",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 7,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "Add export dropdown to RiskOverview page",
      "description": "As a user, I want an export button on the alerts page so that I can easily download alert reports.",
      "acceptanceCriteria": [
        "Add Export dropdown button to RiskOverview page with options: 'Export as CSV' and 'Export as PDF'",
        "Clicking CSV option triggers download from /api/alerts/export/csv with current filters",
        "Clicking PDF option triggers download from /api/alerts/export/pdf with current filters",
        "Button positioned near page header or filters",
        "Show loading indicator during export",
        "Handle errors gracefully with toast notifications",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "Add export dropdown to Hosts page",
      "description": "As a user, I want an export button on the hosts page so that I can easily download host inventory reports.",
      "acceptanceCriteria": [
        "Add Export dropdown button to Hosts page with options: 'Export as CSV' and 'Export as PDF'",
        "Clicking CSV option triggers download from /api/hosts/export/csv with current filters",
        "Clicking PDF option triggers download from /api/hosts/export/pdf with current filters",
        "Button positioned near page header or filters",
        "Show loading indicator during export",
        "Handle errors gracefully with toast notifications",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 9,
      "passes": false,
      "notes": ""
    }
  ]
}
